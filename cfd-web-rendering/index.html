<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>2D Fluid Simulation</title>
    <meta name="viewport" content="width=400">

    <link rel="stylesheet" type="text/css" href="public/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="public/css/flat-ui.min.css">
    <link rel="stylesheet" type="text/css" href="public/css/main.css">
    <script id="2d-vertex-shader" type="x-shader/x-vertex">
        attribute vec2 a_position;
        void main() {
           gl_Position = vec4(a_position, 0, 1);
        }
    </script>
    <script type="text/javascript" src="public/js/jquery-3.1.0.min.js"></script>
    <script type="text/javascript" src="public/js/flat-ui.min.js"></script>
    <script type="text/javascript" src="src/core/GlBoilerplate.js"></script>
    <script type="text/javascript" src="src/core/GPUMath.js"></script>
    <script type="text/javascript" src="main.js"></script>
    <style>
        .control-box {
            margin-top: 20px;
            text-align: center;
        }
        .simulation-box {
            margin: 20px auto;
            text-align: center;
        }
        button {
            margin: 5px;
        }
        .settings-modal {
            display: none; /* 기본적으로 숨김 */
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            padding: 20px;
            background: white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            border-radius: 10px;
        }
        .settings-modal h3 {
            margin-top: 0;
        }
        .overlay {
            display: none; /* 기본적으로 숨김 */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        .slider-container {
            margin-bottom: 15px;
        }
        .slider-container label {
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>2D Fluid Simulation</h1>
            <p class="description">Web Rendering of Fluid Simulation</p>
        </header>
        
        <main>
            <div class="simulation-box">
                <canvas id="glcanvas"></canvas>
            </div>
            <button id="toggleObstacle" class="btn btn-primary">Obstacle On/Off</button>
            <button id="openSettings" class="btn btn-secondary">Options</button>
        </main>
    </div>

    <!-- 옵션 설정 모달 -->
    <div class="overlay" id="settingsOverlay"></div>
    <div class="settings-modal" id="settingsModal">
        <h3>Simulation Settings</h3>
        <div class="slider-container">
            <label for="speedSlider">Speed</label>
            <input type="range" id="speedSlider" min="0" max="10" step="0.1" value="1">
        </div>
        <div class="slider-container">
            <label for="densitySlider">Density</label>
            <input type="range" id="densitySlider" min="0" max="10" step="0.1" value="1">
        </div>
        <div class="slider-container">
            <label for="viscositySlider">Viscosity</label>
            <input type="range" id="viscositySlider" min="0" max="10" step="0.1" value="1">
        </div>
        <div class="slider-container">
            <label for="obstacleRadiusSlider">Obstacle Radius</label>
            <input type="range" id="obstacleRadiusSlider" min="10" max="100" step="1" value="30">
        </div>
        <button id="defaultSettings" class="btn btn-info">Default</button>
        <button id="closeSettings" class="btn btn-danger">Close</button>
    </div>

    <script>
        // 모달 및 오버레이 요소
        const settingsModal = document.getElementById('settingsModal');
        const settingsOverlay = document.getElementById('settingsOverlay');

        // 옵션 버튼 이벤트
        document.getElementById('openSettings').addEventListener('click', function () {
            settingsModal.style.display = 'block';
            settingsOverlay.style.display = 'block';
        });

        // 닫기 버튼 이벤트
        document.getElementById('closeSettings').addEventListener('click', function () {
            settingsModal.style.display = 'none';
            settingsOverlay.style.display = 'none';
        });

        // default 버튼 이벤트
        document.getElementById('defaultSettings').addEventListener('click', function () {
            speedSlider.value = 1;
            densitySlider.value = 1;
            viscositySlider.value = 1;
            obstacleRadiusSlider.value = 30;
        });

        // 슬라이더 값 변경 이벤트
        const speedSlider = document.getElementById('speedSlider');
        const densitySlider = document.getElementById('densitySlider');
        const viscositySlider = document.getElementById('viscositySlider');
        const obstacleRadiusSlider = document.getElementById('obstacleRadiusSlider');

        speedSlider.addEventListener('input', function () {
            console.log('Speed:', speedSlider.value);
            // 속도 값 업데이트 로직 추가
        });

        densitySlider.addEventListener('input', function () {
            console.log('Density:', densitySlider.value);
            // 밀도 값 업데이트 로직 추가
        });

        viscositySlider.addEventListener('input', function () {
            console.log('Viscosity:', viscositySlider.value);
            // 점도 값 업데이트 로직 추가
        });

        obstacleRadiusSlider.addEventListener('input', function () {
            console.log('Obstacle Radius:', obstacleRadiusSlider.value);
            // 장애물 반지름 값 업데이트 로직 추가
        });
    </script>
</body>
</html>
